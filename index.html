<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>WebXR Pose (No Camera)</title>
  <style>
    body { font-family: sans-serif; padding: 20px; }
    #poseData {
      margin-top: 20px;
      font-size: 1.2em;
      white-space: pre-wrap;
      background: #f5f5f5;
      padding: 12px;
      border-radius: 8px;
    }
  </style>
</head>
<body>
  <h1>WebXR Phone Pose (No Camera)</h1>
  <button id="start">Start Pose Tracking</button>
  <div id="poseData">Pose data will appear here.</div>

  <script>
    let xrSession = null;
    let xrRefSpace = null;
    const poseDisplay = document.getElementById('poseData');

    document.getElementById('start').addEventListener('click', async () => {
      if (navigator.xr) {
        try {
          xrSession = await navigator.xr.requestSession('inline', {
            requiredFeatures: ['local']
          });

          const glCanvas = document.createElement('canvas');
          const gl = glCanvas.getContext('webgl', { xrCompatible: true });
          await xrSession.updateRenderState({ baseLayer: new XRWebGLLayer(xrSession, gl) });

          xrRefSpace = await xrSession.requestReferenceSpace('local');

          xrSession.requestAnimationFrame(onXRFrame);
        } catch (err) {
          poseDisplay.textContent = 'Error starting XR session: ' + err.message;
        }
      } else {
        poseDisplay.textContent = 'WebXR not supported in this browser.';
      }
    });

    function onXRFrame(time, frame) {
      const session = frame.session;
      session.requestAnimationFrame(onXRFrame);

      const pose = frame.getViewerPose(xrRefSpace);
      if (pose) {
        const pos = pose.transform.position;
        const orient = pose.transform.orientation;

        poseDisplay.textContent = `Position:
  x = ${pos.x.toFixed(3)}
  y = ${pos.y.toFixed(3)}
  z = ${pos.z.toFixed(3)}

Orientation (quaternion):
  x = ${orient.x.toFixed(3)}
  y = ${orient.y.toFixed(3)}
  z = ${orient.z.toFixed(3)}
  w = ${orient.w.toFixed(3)}`;
      }
    }
  </script>
</body>
</html>

